<header class="container">

    <body>
        <%- include('navbar.ejs'); %>
            <h3>Add Two Numbers!</h3> <!-- h3 for header text -->
            <!-- use a POST request for html form. To POST, action is to use adding.ejs/add -->
            <form method="post" action="adding.ejs/add">
                <!-- id set to number1 with type set to number -->
                <label>FIRST NUMBER:</label>
                <input id="number1" type="number" />

                <!-- id set to number2 with type also set to number -->
                <label>SECOND NUMBER:</label>
                <input id="number2" type="number" />

                <!-- button "ADD 'EM UP!" is a submit type so that it sends all data to javascript -->
                <input type="submit" value="ADD 'EM UP!" />
            </form>
            <!-- BOOTSTRAP 5 STYLE SHEETS! -->
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
                integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
                crossorigin="anonymous">
            <link rel="stylesheet" type="text/css" href="../main.css">

            <!-- This is where the adding feature gets computed! -->
            <script>
                //listen for the submit button to be pressed
                document.body.addEventListener("submit", sendData);

                //function that handles the submit button
                function sendData(event) {
                    event.preventDefault(); //prevent website from refreshing
                    
                    //first number variable
                    const number1 = document.querySelector("#number1").value;

                    //second number variable
                    const number2 = document.querySelector("#number2").value;

                    //result variable, use parseint to get actual numerical value
                    const result = parseInt(number1) + parseInt(number2);

                    //fetch will use the POST request function from the main website.js file
                    gettingAdd = fetch("/add", {
                        method: "POST",
                        headers: {
                            //this specifies that we're using json files for the request
                            'Content-Type': 'applications/json'
                        },
                        //the body of the json will be the integers of all our variables
                        body: JSON.stringify({
                            number1: parseInt(number1),
                            number2: parseInt(number2),
                            result: parseInt(result)
                        })
                    })
                        //the response variable will send a website consisting of just the resulting number to the user
                        .then(response => {
                            document.write(result);
                        })
                        //if there's an error, send it to the console
                        .catch(err => console.log(err));
                }
            </script>
    </body>